# cfw/starbase/wrangler.toml
name = "starbase"
main = "src/index.ts"
compatibility_date = "2022-09-14"

# #############################################################################
# NB: we don't supply an external route for this service as it is
# intended to be service-bound.
# #############################################################################

# Don't automatically expose this service at:
# <worker-name>.<account-name>.workers.dev.
workers_dev = false

# Services
# -----------------------------------------------------------------------------

# A list of other Clouflare services bound to this service.
# services = [
#   { binding = "AUTH", service = "auth", environment = "production" },
# ]

# Secrets
# -----------------------------------------------------------------------------

# Secrets are set via the dashboard, or using the wrangler CLI:
# $ wrangler secret put <KEY> [--env]
#
# Required secrets:
# N/A

# Durable Objects
# -----------------------------------------------------------------------------

[dev]

[[migrations]]
tag = "v1"
new_classes = [
  "StarbaseApplication",
  "StarbaseContract",
  "StarbaseUser",
]

# Environment: dev
# -----------------------------------------------------------------------------

[env.dev]

durable_objects.bindings = [
  { name = "STARBASE_APP", class_name = "StarbaseApplication" },
  { name = "STARBASE_CONTRACT", class_name = "StarbaseContract" },
  { name = "STARBASE_USER", class_name = "StarbaseUser" },
]

[env.dev.vars]

# Environment: next
# -----------------------------------------------------------------------------

[env.next]

durable_objects.bindings = [
  { name = "STARBASE_APP", class_name = "StarbaseApplication" },
  { name = "STARBASE_CONTRACT", class_name = "StarbaseContract" },
  { name = "STARBASE_USER", class_name = "StarbaseUser" },
]

[env.next.vars]

# Environment: current
# -----------------------------------------------------------------------------

[env.current]

durable_objects.bindings = [
  { name = "STARBASE_APP", class_name = "StarbaseApplication" },
  { name = "STARBASE_CONTRACT", class_name = "StarbaseContract" },
  { name = "STARBASE_USER", class_name = "StarbaseUser" },
]

[env.current.vars]
